# Дорожная Карта Разработки Платформы для Предпринимателей (MVP)

**Версия документа:** 1.1 (*Изменено: Упрощение антивирусной проверки*)
**Дата:** 10 мая 2025 г.
**Общая длительность MVP разработки:** 8 недель (2 месяца)

## 1. Введение

### 1.1. Цель Дорожной Карты
Настоящая Дорожная Карта определяет последовательность и основные этапы разработки Минимально Жизнеспособного Продукта (MVP) Платформы для Предпринимателей в соответствии с Техническим Заданием (ТЗ) версии 1.2. Документ служит руководством для ИИ-ассистента и руководителя проекта.

### 1.2. Ключевые Допущения
* Разработка ведется с активным использованием ИИ-ассистента.
* Требования, изложенные в ТЗ v1.2, являются основой для разработки, **за исключением антивирусной проверки файлов при загрузке, которая для MVP будет исключена или максимально упрощена.**
* Доступ к необходимым API внешних сервисов (платежный шлюз, email-сервис) будет предоставлен или настроен ИИ в начале соответствующих этапов.
* Руководитель проекта (пользователь) обеспечивает своевременную обратную связь и утверждения, где это предусмотрено.

## 2. Архитектурный Подход: Ядро и Модули
Платформа будет разрабатываться на основе модульной архитектуры:
* **Ядро Платформы (Core):** Включает базовые, сквозные функции, такие как аутентификация, управление пользователями и компаниями, базовые настройки API, CI/CD, основные компоненты UI.
* **Функциональные Модули:** Отдельные, логически завершенные части функционала, подключаемые к Ядру (например, Модуль Запросов, Модуль Оплаты).

## 3. Общий План Разработки (8 недель)

* **Неделя 1-2 (Спринт 1):** Настройка проекта, Ядро Платформы (Аутентификация, Пользователи, Компании), Базовый UI-каркас.
* **Неделя 3-4 (Спринт 2):** Модуль Управления Запросами и Консьерж-Сервис (основной функционал), Чат.
* **Неделя 5-6 (Спринт 3):** Модуль Тарифов и Платежей, Модуль Управления Знаниями (Подрядчики, Шаблоны - базовый просмотр).
* **Неделя 7-8 (Спринт 4):** Дашборд, Уведомления, Административная панель (базовый CRUD), Финализация, Тестирование, Подготовка к запуску.

## 4. Детализация по Спринтам

---

### **Спринт 1: Основы и Ядро Платформы (Недели 1-2)**

**Цель Спринта:** Заложить фундамент проекта, реализовать базовую аутентификацию, управление пользователями и компаниями, настроить окружение и CI/CD. Создать основной каркас UI.

**Ключевые Задачи и Модули:**

1.  **[ ] Настройка Проекта и Окружения:**
    * **Контекст:** Инициализация репозиториев, настройка сред разработки.
    * **Задачи:**
        * [ ] Инициализация Frontend проекта (Next.js, TypeScript, Tailwind CSS, `shadcn/ui`).
            * *Измененные файлы: структура проекта Next.js, package.json, tsconfig.json, tailwind.config.js и т.д.*
        * [ ] Инициализация Backend проекта (NestJS, TypeScript, PostgreSQL, Prisma ORM).
            * *Измененные файлы: структура проекта NestJS, package.json, tsconfig.json, .env.example, prisma/schema.prisma (начальная) и т.д.*
        * [ ] Настройка Docker-окружения для локальной разработки (docker-compose.yml).
        * [ ] Настройка базового CI/CD пайплайна (Linting, запуск заглушек тестов, сборка).
            * *Измененные файлы: .github/workflows/main.yml или .gitlab-ci.yml*
    * **Ожидаемый результат:** Готовые к разработке репозитории, работающее локальное окружение, базовый CI/CD.

2.  **[ ] Ядро: Модуль Аутентификации и Пользователей (Backend + Frontend):**
    * **Контекст:** Реализация регистрации, входа, управления профилем.
    * **Задачи:**
        * [ ] Проектирование и реализация схемы БД для User, Company (ТЗ Раздел 6).
            * *Измененные файлы: prisma/schema.prisma, файлы миграций*
        * [ ] Backend: API для регистрации Предпринимателя (ТЗ 4.1.1, 7.3).
        * [ ] Backend: API для аутентификации (логин, JWT токены, refresh token) (ТЗ 4.1.2, 7.2, 7.3).
        * [ ] Backend: API для восстановления пароля (ТЗ 4.1.2, 7.3).
        * [ ] Backend: API для управления профилем пользователя (`/users/me`) (ТЗ 4.1.3, 7.3).
        * [ ] Frontend: Страницы и формы Регистрации, Входа, Восстановления пароля.
        * [ ] Frontend: Базовая страница Профиля пользователя.
        * [ ] Frontend: Интеграция с API аутентификации и профиля.
        * [ ] Написание Unit-тестов для сервисов аутентификации и пользователей (Backend).
    * **Ожидаемый результат:** Пользователи могут регистрироваться, входить в систему, управлять базовым профилем.

3.  **[ ] Ядро: Модуль Компаний и Сотрудников (Backend + Frontend - базовый):**
    * **Контекст:** Управление компанией и приглашение сотрудников.
    * **Задачи:**
        * [ ] Backend: API для управления данными компании (`/companies/my`) (ТЗ 4.1.3, 7.3).
        * [ ] Backend: API для приглашения и управления сотрудниками (базовое) (ТЗ 4.1.4, 7.3).
        * [ ] Frontend: Базовый раздел управления компанией и сотрудниками в ЛК Предпринимателя.
        * [ ] Написание Unit-тестов для сервисов компаний (Backend).
    * **Ожидаемый результат:** Предприниматель может редактировать данные компании и приглашать сотрудников.

4.  **[ ] UI: Базовый Каркас Приложения:**
    * **Контекст:** Создание основной структуры навигации и лейаутов.
    * **Задачи:**
        * [ ] Разработка основного лейаута приложения (шапка, подвал, боковая навигация для ЛК, если применимо).
        * [ ] Создание базовых страниц-заглушек для основных разделов MVP.
        * [ ] Настройка роутинга в Next.js.
    * **Ожидаемый результат:** Пользователь может перемещаться по основным разделам приложения (пока без полного функционала).

**Демонстрация и Утверждение в конце Спринта 1:**
* Работающая регистрация, вход, выход.
* Возможность редактирования профиля пользователя и компании.
* Базовый UI-каркас.
* CI/CD пайплайн выполняет базовые проверки.

---

### **Спринт 2: Модуль Управления Запросами и Консьерж-Сервис (Недели 3-4)**

**Цель Спринта:** Реализовать ключевой функционал платформы – создание и управление запросами, включая чат между клиентом и консьерж-менеджером.

**Ключевые Задачи и Модули:**

1.  **[ ] Модуль Запросов (Backend + Frontend):**
    * **Контекст:** Основной инструмент взаимодействия клиента с платформой.
    * **Задачи:**
        * [ ] Проектирование и реализация схемы БД для Request, RequestFile (ТЗ Раздел 6).
            * *Измененные файлы: prisma/schema.prisma, файлы миграций*
        * [ ] Backend: API для создания Запроса (ТЗ 4.2.1, 7.3). Включая загрузку файлов. **Примечание MVP: Антивирусная проверка файлов при загрузке для MVP исключается или реализуется в максимально упрощенном виде (например, проверка по типу файла и размеру) для соблюдения сроков.**
        * [ ] Backend: API для просмотра списка Запросов и деталей Запроса (для клиента и консьержа) (ТЗ 4.2.2, 7.3).
        * [ ] Backend: API для обновления статуса Запроса (Консьерж-менеджер) (ТЗ 4.2.3, 7.3).
        * [ ] Frontend: Форма создания нового Запроса с прикреплением файлов.
        * [ ] Frontend: Страница списка Запросов (для Предпринимателя/Сотрудника).
        * [ ] Frontend: Страница детального просмотра Запроса.
        * [ ] Написание Unit-тестов для сервисов Запросов (Backend).
    * **Ожидаемый результат:** Пользователи могут создавать запросы, просматривать их список и детали.

2.  **[ ] Интерфейс Консьерж-Менеджера (Backend + Frontend - базовый):**
    * **Контекст:** Инструмент для работы Консьерж-менеджеров.
    * **Задачи:**
        * [ ] Frontend: Базовый интерфейс для Консьерж-менеджера: список новых запросов, список запросов в работе.
        * [ ] Frontend: Возможность для Консьерж-менеджера принять запрос в работу, изменить статус.
        * [ ] Backend: Логика назначения запросов (для MVP – ручное взятие в работу или отображение в общем списке).
    * **Ожидаемый результат:** Консьерж-менеджер может видеть запросы и управлять их статусами.

3.  **[ ] Чат Клиент-Консьерж (Backend + Frontend):**
    * **Контекст:** Коммуникация по каждому запросу.
    * **Задачи:**
        * [ ] Проектирование и реализация схемы БД для ChatMessage (ТЗ Раздел 6).
            * *Измененные файлы: prisma/schema.prisma, файлы миграций*
        * [ ] Backend: API для отправки и получения сообщений в чате по Запросу (ТЗ 4.2.4, 7.3).
        * [ ] Frontend: UI чата на странице детального просмотра Запроса.
        * [ ] (Опционально для MVP, но включено по запросу "полноценно") Реализация прикрепления файлов в чат.
        * [ ] Написание Unit-тестов для сервиса Чата (Backend).
    * **Ожидаемый результат:** Клиент и Консьерж-менеджер могут общаться в чате по каждому запросу.

**Демонстрация и Утверждение в конце Спринта 2:**
* Полный цикл создания и обработки запроса (без подбора подрядчика).
* Работающий чат по запросам.
* Базовый интерфейс Консьерж-менеджера.

---

### **Спринт 3: Монетизация и Знания (Недели 5-6)**

**Цель Спринта:** Реализовать систему тарифов и оплаты, а также предоставить доступ к Базе Подрядчиков и Шаблонам.

**Ключевые Задачи и Модули:**

1.  **[ ] Модуль Тарифов и Платежей (Backend + Frontend):**
    * **Контекст:** Монетизация платформы.
    * **Задачи:**
        * [ ] Проектирование и реализация схемы БД для TariffPlan, Payment (ТЗ Раздел 6).
            * *Измененные файлы: prisma/schema.prisma, файлы миграций*
        * [ ] Backend: API для управления Тарифами (CRUD для Администратора – см. Спринт 4, здесь – API для получения списка тарифов).
        * [ ] Backend: Интеграция с платежным шлюзом (Tinkoff Kassa) для обработки подписок и разовых платежей (ТЗ 4.4.3, 7.3).
        * [ ] Backend: API для управления подписками пользователя.
        * [ ] Frontend: Страница с описанием Тарифов.
        * [ ] Frontend: Процесс выбора и оплаты тарифа.
        * [ ] Frontend: Раздел управления подпиской и историей платежей в ЛК.
        * [ ] Написание Unit-тестов для сервисов Тарифов и Платежей (Backend).
    * **Ожидаемый результат:** Пользователи могут выбирать тариф, оплачивать подписку, управлять ею.

2.  **[ ] Модуль Управления Знаниями: База Подрядчиков (Backend + Frontend - просмотр):**
    * **Контекст:** Предоставление доступа к проверенным специалистам.
    * **Задачи:**
        * [ ] Проектирование и реализация схемы БД для Contractor (ТЗ Раздел 6).
            * *Измененные файлы: prisma/schema.prisma, файлы миграций*
        * [ ] Backend: API для получения списка Подрядчиков с фильтрами и деталей Подрядчика (для Клиента) (ТЗ 4.3.1, 7.3).
        * [ ] Frontend: Раздел "Подрядчики" с возможностью просмотра списка, фильтрации и профилей.
        * [ ] Frontend: Реализация логики "контакт через консьержа".
        * [ ] (Для Администратора – см. Спринт 4) Возможность первоначального наполнения базы (15-20 подрядчиков) через seed-скрипт (ТЗ 5.6).
    * **Ожидаемый результат:** Клиенты могут просматривать Базу Подрядчиков согласно своему тарифу.

3.  **[ ] Модуль Управления Знаниями: Библиотека Шаблонов (Backend + Frontend - просмотр):**
    * **Контекст:** Предоставление полезных документов.
    * **Задачи:**
        * [ ] Проектирование и реализация схемы БД для DocumentTemplate (ТЗ Раздел 6).
            * *Измененные файлы: prisma/schema.prisma, файлы миграций*
        * [ ] Backend: API для получения списка Шаблонов и скачивания файла (ТЗ 4.3.2, 7.3).
        * [ ] Frontend: Раздел "Шаблоны" с возможностью просмотра списка, поиска и скачивания.
        * [ ] (Для Администратора – см. Спринт 4) Возможность первоначального наполнения (5-10 шаблонов) через seed-скрипт (ТЗ 5.6).
    * **Ожидаемый результат:** Клиенты могут просматривать и скачивать шаблоны.

**Демонстрация и Утверждение в конце Спринта 3:**
* Работающая система тарифов и оплат подписок.
* Возможность просмотра Базы Подрядчиков и Библиотеки Шаблонов.

---

### **Спринт 4: Завершение MVP и Подготовка к Запуску (Недели 7-8)**

**Цель Спринта:** Реализовать оставшийся функционал MVP (Дашборд, Уведомления, Админ-панель), провести комплексное тестирование и подготовить платформу к запуску.

**Ключевые Задачи и Модули:**

1.  **[ ] Дашборд Предпринимателя (Frontend + Backend):**
    * **Контекст:** Сводная информация для пользователя.
    * **Задачи:**
        * [ ] Backend: API для сбора данных для Дашборда (активные запросы, уведомления и т.д.).
        * [ ] Frontend: Реализация Дашборда согласно ТЗ (4.4.1).
    * **Ожидаемый результат:** Функциональный Дашборд для Предпринимателя.

2.  **[ ] Система Уведомлений (Backend + Frontend):**
    * **Контекст:** Информирование пользователей о событиях.
    * **Задачи:**
        * [ ] Проектирование и реализация схемы БД для Notification (ТЗ Раздел 6).
            * *Измененные файлы: prisma/schema.prisma, файлы миграций*
        * [ ] Backend: Логика создания Уведомлений по ключевым событиям (ТЗ 4.4.2).
        * [ ] Backend: API для получения и управления Уведомлениями (ТЗ 7.3).
        * [ ] Backend: Интеграция с Email-сервисом (SendGrid или аналог) для отправки Email-уведомлений.
        * [ ] Frontend: UI для отображения внутрисистемных уведомлений.
        * [ ] Написание Unit-тестов для сервиса Уведомлений (Backend).
    * **Ожидаемый результат:** Пользователи получают уведомления о ключевых событиях.

3.  **[ ] Административная Панель (Backend + Frontend - базовый CRUD):**
    * **Контекст:** Управление платформой.
    * **Задачи:**
        * [ ] Backend: API для управления Пользователями (Консьержи), Подрядчиками, Шаблонами, Тарифами (CRUD операции для Администратора) (ТЗ 7.3).
        * [ ] Frontend: Минималистичный UI для Администратора для выполнения этих CRUD операций (ТЗ 2.7).
        * [ ] Настройка доступа к админ-панели только для роли "Администратор".
    * **Ожидаемый результат:** Администратор может управлять основными сущностями платформы. Вы (руководитель проекта) сможете наполнить контент.

4.  **[ ] Финализация и Тестирование:**
    * **Контекст:** Обеспечение качества MVP.
    * **Задачи:**
        * [ ] Проведение комплексного ручного тестирования всех пользовательских сценариев MVP.
        * [ ] Исправление выявленных ошибок.
        * [ ] Проверка адаптивности UI на основных устройствах.
        * [ ] Базовое тестирование производительности и безопасности.
        * [ ] Подготовка минимальной пользовательской документации/FAQ.
    * **Ожидаемый результат:** Стабильная, протестированная версия MVP.

5.  **[ ] Подготовка к Развертыванию на Production:**
    * **Контекст:** Запуск платформы.
    * **Задачи:**
        * [ ] Финальная настройка Production-среды (Yandex Cloud или аналог).
        * [ ] Настройка доменного имени, SSL-сертификатов.
        * [ ] Проведение тестового развертывания на Production.
        * [ ] Настройка систем мониторинга и логирования для Production (базовая).
    * **Ожидаемый результат:** Платформа готова к запуску для первых пользователей.

**Демонстрация и Утверждение в конце Спринта 4 (Финальное демо MVP):**
* Полностью работающий функционал MVP согласно ТЗ.
* Продемонстрирована работа всех ролей.
* Платформа развернута на staging/production.

---

## 5. Управление Рисками (Кратко)
* **Риск:** Задержки из-за сложности интеграции с внешними API (платежи, email).
    * **Митигация:** Раннее начало работ по интеграциям, выбор сервисов с хорошей документацией, наличие запасных вариантов.
* **Риск:** Некорректная генерация кода ИИ, требующая значительной доработки.
    * **Митигация:** Четкая постановка задач для ИИ, итеративная разработка с частой обратной связью, unit-тесты.
* **Риск:** Нехватка времени на "полноценную" реализацию всех "опциональных" функций.
    * **Митигация:** Постоянный мониторинг прогресса, готовность к упрощению наименее критичных функций при необходимости (несмотря на текущее пожелание "полноценно").

## 6. Следующие Шаги (После MVP)
* Сбор обратной связи от первых пользователей.
* Анализ метрик.
* Приоритизация и планирование разработки следующей версии на основе данных и "Списка хотелок для платформы" (Раздел 6 ТЗ).

